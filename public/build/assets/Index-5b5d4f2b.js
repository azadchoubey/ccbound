import{d as a,y as g,s as I,u as Y,c as Q,w as c,o,a as s,b as r,h as d,L as R,t as y,e as n,p as N,j as m,R as z,g as L,f as v,l as A,i as b,F as w,E as $}from"./app-a99c1f11.js";import{_ as G}from"./AppLayout-f8922642.js";import{_ as H}from"./TextInput-a7862116.js";import{P as J,C as K}from"./PlusIcon-5a7468cb.js";import{_ as W}from"./DialogModal-264a62a2.js";import{_ as B}from"./PrimaryButton-c774a4fc.js";import{_ as X}from"./SecondaryButton-9f95c4b3.js";import{_ as Z}from"./InfiniateScroll-90a21e0f.js";import"./Banner-af0e7d7b.js";import"./BottomTab-9f3a44df.js";import"./Sidebar-08876489.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastList-b09059d6.js";import"./BuildingIcon-6438f979.js";import"./MapPinIcon-609e4c0a.js";import"./UserIcon-5b9f3114.js";import"./DialogModal-c682f939.js";import"./Modal-6b8225ed.js";import"./helpers-3a38de6b.js";/* empty css                                                                            */const ee={class:"max-w-[40rem]"},te={class:"flex justify-between px-2 my-3"},se=s("p",{class:"px-2 text-xl font-semibold"},"Sales",-1),le={class:"flex items-center p-1 px-4 py-2 text-white bg-blue-600 rounded-lg"},ae=s("p",{class:"text-sm"},"Add Sale",-1),oe={class:"px-2"},ne={class:"flex justify-end w-full px-2 py-1"},ue={class:"mt-2 mr-3 text-blue-400"},ie={key:0,class:"my-5"},de=s("p",{class:"text-xl font-bold"},"Share message",-1),re=["onSubmit"],ce={class:"flex justify-end w-full"},me={class:"flex flex-col gap-2 px-2"},pe=s("p",{class:"text-xl font-bold"},"Sales",-1),fe={class:"flex w-full gap-2"},ve=["value"],_e={class:"mt-4"},he=s("p",{class:"mb-2"},"Change Location",-1),xe=["onSubmit"],ge={class:"flex items-center gap-2 mb-2"},ye=s("option",{value:"",selected:"",disabled:""}," Select Country ",-1),be=["value"],we={key:0,class:"flex items-center gap-2 mb-2"},Se=s("option",{value:"",selected:"",disabled:""}," Select State ",-1),ke=["value"],Ce={key:1,class:"flex items-center gap-2 mb-2"},Ve=s("option",{value:"",selected:"",disabled:""}," Select City ",-1),Me=["value"],He={__name:"Index",props:{confirmsTwoFactorAuthentication:Boolean,sessions:Array,sales:Object,products:Object,countries:Object,filterCountry:Object},setup(j){const S=j,k=a(!1),_=a(""),i=a(S.sales);a(S.products);const U=a(!1),F=S.filterCountry,C=a(null),h=a(null),x=a(null),p=a(null),V=a(null);a(null),g(x,async(l,t)=>{axios.get(route("states",{country:l})).then(e=>{C.value=e.data.length>0?e.data:null,h.value=null,p.value=null})}),g(p,async(l,t)=>{axios.get(route("cities",{state:l})).then(e=>{h.value=e.data.length>0?e.data:null})});const E=()=>{window.location="/sales?country="+x.value+"&state="+p.value+"&city="+V.value},O=()=>{window.location="/sales"};I(()=>{(!i.value.data.length||i.value.data.length<4)&&(U.value=!0)});const u=Y({message:null,sales:a([]),products:a([])}),P=()=>{if(i.value.next_page_url)return axios.get(i.value.next_page_url).then(l=>{i.value={...l.data,data:[...i.value.data,...l.data.data]}})};let f=!1;g(_,async(l,t)=>{l.value!==""?axios.get(route("sales.index",{search:l})).then(e=>{i.value=e.data,i.value.data.length||(U.value=!0)}):window.location.reload(),_.value!=""?f=!0:(f=!1,u.sales=[])});const q=()=>{if(u.sales.length+u.products.length>5){alert("You cannot select more than 5");return}u.post(route("chatroom.sendMessages"),{onFinish:()=>confirm("Message Sent")})};g(u,async(l,t)=>{l.sales.length+l.products.length>5&&alert("You cannot select more than 5")});const M=a(null),D=l=>{l.target.checked?i.value.data.forEach(t=>{u.sales.push(t.id)}):(u.sales=[],M.value=null),console.log(u.sales)};return(l,t)=>(o(),Q(G,{title:"Sales"},{default:c(()=>[s("div",ee,[s("div",te,[se,r(d(R),{href:l.route("sales.create")},{default:c(()=>[s("div",le,[r(J,{class:"h-[1.3rem]"}),ae])]),_:1},8,["href"])]),s("div",oe,[r(H,{type:"text",modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e),class:"mt-1 block w-full h-[2.5rem] p-1",placeholder:"Search Product Name/CAS No"},null,8,["modelValue"])]),s("div",ne,[s("span",ue,y(d(F)?d(F).name.toUpperCase():""),1),s("button",{onClick:t[1]||(t[1]=e=>k.value=!0),class:"p-1 px-4 py-1 text-sm text-white bg-blue-600 rounded-lg"}," Filter Location ")]),d(f)?(o(),n("div",ie,[de,s("form",{onSubmit:N(q,["prevent"])},[m(s("textarea",{class:"w-full rounded-lg focus:outline-none","onUpdate:modelValue":t[2]||(t[2]=e=>d(u).message=e),required:""},null,512),[[z,d(u).message]]),s("div",ce,[r(B,{class:"px-4 py-2 text-sm text-white bg-blue-600 border-blue-600 rounded-lg"},{default:c(()=>[L("Share ")]),_:1})])],40,re)])):v("",!0),s("div",me,[pe,r(Z,{onLoadMore:P,class:"space-y-4"},{default:c(()=>[d(f)?m((o(),n("input",{key:0,type:"checkbox",class:"block mb-5",value:"0","onUpdate:modelValue":t[3]||(t[3]=e=>M.value=e),onChange:D},null,544)),[[A,M.value]]):v("",!0),(o(!0),n(w,null,b(i.value.data,e=>(o(),n("div",fe,[d(f)?m((o(),n("input",{key:0,type:"checkbox",class:"block",value:e.id,"onUpdate:modelValue":t[4]||(t[4]=T=>d(u).sales=T)},null,8,ve)),[[A,d(u).sales]]):v("",!0),r(K,{details:e,id:"SLE"+e.id,link:l.route("enquiry.chats.redirect",{sale:e.id})},null,8,["details","id","link"])]))),256))]),_:1})])]),r(W,{show:k.value,onClose:t[9]||(t[9]=e=>k.value=!1)},{content:c(()=>[s("div",_e,[he,s("form",{onSubmit:N(E,["prevent"])},[s("div",ge,[m(s("select",{name:"country",id:"country",class:"w-full rounded-lg","onUpdate:modelValue":t[5]||(t[5]=e=>x.value=e),required:""},[ye,(o(!0),n(w,null,b(j.countries,e=>(o(),n("option",{value:e.id},y(e.name),9,be))),256))],512),[[$,x.value]])]),C.value?(o(),n("div",we,[m(s("select",{name:"state",id:"state",class:"w-full rounded-lg","onUpdate:modelValue":t[6]||(t[6]=e=>p.value=e)},[Se,(o(!0),n(w,null,b(C.value,e=>(o(),n("option",{value:e.id},y(e.name),9,ke))),256))],512),[[$,p.value]])])):v("",!0),h.value?(o(),n("div",Ce,[m(s("select",{name:"city",id:"city",class:"w-full rounded-lg","onUpdate:modelValue":t[7]||(t[7]=e=>V.value=e)},[Ve,(o(!0),n(w,null,b(h.value,e=>(o(),n("option",{value:e.id},y(e.name),9,Me))),256))],512),[[$,V.value]])])):v("",!0),r(X,{onClick:t[8]||(t[8]=e=>O())},{default:c(()=>[L(" Cancel ")]),_:1}),r(B,{class:"ml-4"},{default:c(()=>[L(" Submit ")]),_:1})],40,xe)])]),_:1},8,["show"])]),_:1}))}};export{He as default};
