import{d as _,u as M,N as R,k as K,c as T,w as g,o as u,a as e,p as Q,b as n,h as l,e as r,f as p,j as f,R as z,i as q,F as h,t as y,l as N,E as S,g as $,B as G,K as H}from"./app-ad745f98.js";import{_ as B}from"./DialogModal-1e7001ec.js";import{_ as J}from"./PrimaryButton-804b527b.js";import{_ as c}from"./InputError-5f6dd6ed.js";import{_ as m}from"./InputLabel-dc2871da.js";import{_ as b}from"./TextInput-e764b81b.js";import{_ as W}from"./FormLayout-ff926ca8.js";import{_ as L}from"./SecondaryButton-efbe443f.js";import"./Banner-2b5a5794.js";import"./ArrowLeftIcon-d696fddf.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Sidebar-8688ddd2.js";import"./ToastList-cd5f7580.js";const Y={class:"max-w-[40rem]"},Z=e("div",{class:"justify-center hidden w-full p-4 md:flex"},[e("p",{class:"text-xl font-bold"},"Edit Enquiry")],-1),ee={class:"px-[2rem] py-[1rem] bg-white"},te=["onSubmit"],se={class:"mb-2"},oe={class:"flex"},le=e("span",{class:"text-sm text-red-600"},"*",-1),ne={class:"mb-2"},ue={class:"flex"},re=e("span",{class:"text-sm text-red-600"},"*",-1),ie={class:"grid grid-cols-2 gap-2 mb-2"},de=["href"],ae=["src"],ce={class:"grid items-center grid-cols-1 gap-4 my-2"},me={class:"grid grid-cols-3 gap-2"},pe=e("div",null,null,-1),fe={class:"flex flex-col items-center w-full"},ye=e("div",null,null,-1),ve={class:"mt-2"},_e=e("p",{class:"text-lg"},"Staff Added",-1),ge={class:"grid grid-cols-1 gap-2 p-2 md:grid-cols-2"},qe={class:"flex justify-between p-2 bg-white border border-gray-200 rounded-lg"},he={class:"flex items-center gap-2"},be=["src"],xe=["onClick"],we=["href"],ke=["src"],Ve=["src"],Ce=["src"],Se={class:"flex items-center gap-2"},je=e("label",{for:"enquiries"},"Enquiries",-1),Ne={class:"grid grid-cols-3"},$e=e("div",null,null,-1),Ee={class:"w-full mt-2"},Ue=e("div",null,null,-1),De={class:"grid grid-cols-2 gap-2"},Re=e("option",{disabled:""}," Select Country ",-1),Be=["value"],Le={key:0},Ae=e("option",{disabled:""}," Select State ",-1),Ie=["value"],Oe={key:1},Pe=e("option",{disabled:""}," Select City ",-1),Xe=["value"],Fe=e("p",{class:"mt-2 text-red-600"}," Note: The enquiry will be deactivated after 14 days. ",-1),Me={class:"grid grid-cols-3"},Ke=e("div",null,null,-1),Te=e("div",null,null,-1),Qe={class:"mt-4"},ze=e("p",{class:"mb-2"},"Add People",-1),Ge={class:"p-2 mt-2 bg-white"},He={class:"flex gap-2"},Je=e("option",{value:"user"},"User",-1),We=e("option",{value:"company"},"Company",-1),Ye=[Je,We],Ze={class:"flex items-center gap-2 mb-2"},et=["value"],tt={for:"name"},st={class:"flex justify-end"},ot={class:"mt-4"},lt=e("p",{class:"mb-2"},"Add Staff",-1),nt={class:"flex items-center gap-2 mb-2"},ut=["value"],rt={for:"name"},it={class:"flex justify-end"},xt={__name:"Edit",props:{employees:Object,enquiry:Object,staffDetails:Object,countries:Object,contacts:Object},setup(a){const i=a,x=_(!1),v=_(!1),w=_("user"),k=_(""),o=M({productName:i.enquiry.product_name,casNo:i.enquiry.cas_no,quantityRequired:i.enquiry.quantity_required,purityRequired:i.enquiry.purity_required,structure:null,description:i.enquiry.description,staff:_([]),docs:null,enquiry:i.enquiry.enquiry_show===1,quote:"",people:_([]),country:i.enquiry.country,state:i.enquiry.state,city:i.enquiry.city});let E=i.countries,V=[],j=[];R(()=>{o.country&&E.forEach(d=>{d.id==o.country&&(V=d.states)})}),R(()=>{o.state&&V.forEach(d=>{d.id==o.state&&(j=d.cities)})});const A=K(()=>{if(k.value!==""){if(w.value==="user")return i.contacts.filter(d=>k.value.toLowerCase().split(" ").every(s=>d.name.toLowerCase().includes(s)));if(w.value==="company")return i.contacts.filter(d=>k.value.toLowerCase().split(" ").every(s=>d.company.name.toLowerCase().includes(s)))}else return i.contacts}),I=()=>{o.quote=document.getElementById("quote").value,o.post(route("enquiry.update",{enquiry:i.enquiry}),{onSuccess:d=>{G.Inertia.get(route("profile.display",{id:i.enquiry.user_id}))}})},O=d=>{H.post(route("enquiry.update",{type:"remove_staff",enquiry:i.enquiry,staff:d})).then(s=>{window.location.reload()})},U=()=>{o.structure=null,i.enquiry.structure=null,i.enquiry.structure_url=null,document.getElementById("structure").value=""},D=()=>{console.log("removeDocs"),o.docs=null,i.enquiry.docs=null,i.enquiry.docs_url=null,document.getElementById("docs").value=""},P=d=>{const s=["jpg","jpeg","png","gif"],t=d.split(".").pop().toLowerCase();return s.includes(t)},X=d=>d.split(".").pop().toLowerCase()==="pdf",F=d=>d.split(".").pop().toLowerCase()==="docx";return(d,s)=>(u(),T(W,{title:"Add Enquiry",navigation:d.route("enquiry.index")},{default:g(()=>[e("div",Y,[Z,e("div",ee,[e("form",{onSubmit:Q(I,["prevent"])},[e("div",se,[e("div",oe,[n(m,{for:"product_name",value:"Product Name"}),le]),n(b,{id:"product_name",modelValue:l(o).productName,"onUpdate:modelValue":s[0]||(s[0]=t=>l(o).productName=t),type:"text",class:"block w-full mt-1",required:""},null,8,["modelValue"]),n(c,{class:"mt-2",message:l(o).errors.productName},null,8,["message"])]),e("div",ne,[e("div",ue,[n(m,{for:"cas_no",value:"CAS No"}),re]),n(b,{id:"cas_no",modelValue:l(o).casNo,"onUpdate:modelValue":s[1]||(s[1]=t=>l(o).casNo=t),placeholder:"111-111-111",type:"text",class:"block w-full mt-1",required:""},null,8,["modelValue"]),n(c,{class:"mt-2",message:l(o).errors.casNo},null,8,["message"])]),e("div",ie,[e("div",null,[n(m,{for:"quantity_required",value:"Quantity"}),n(b,{id:"quantity_required",modelValue:l(o).quantityRequired,"onUpdate:modelValue":s[2]||(s[2]=t=>l(o).quantityRequired=t),type:"text",class:"block w-full mt-1"},null,8,["modelValue"]),n(c,{class:"mt-2",message:l(o).errors.quantityRequired},null,8,["message"])]),e("div",null,[n(m,{for:"purity_required",value:"Purity"}),n(b,{id:"purity_required",modelValue:l(o).purityRequired,"onUpdate:modelValue":s[3]||(s[3]=t=>l(o).purityRequired=t),type:"text",class:"block w-full mt-1"},null,8,["modelValue"]),n(c,{class:"mt-2",message:l(o).errors.purityRequired},null,8,["message"])])]),e("div",null,[n(m,{for:"structure",value:"Structure"}),e("input",{type:"file",name:"structure",onInput:s[4]||(s[4]=t=>l(o).structure=t.target.files[0]),id:"structure",accept:".pdf, .jpg, .jpeg, .png, .doc, .docx"},null,32),l(o).structure?(u(),r("button",{key:0,type:"button",class:"text-red-800 bg-white rounded",onClick:U},"X")):p("",!0),n(c,{class:"mt-2",message:l(o).errors.structure},null,8,["message"]),e("div",null,[a.enquiry.structure?(u(),r("button",{key:0,type:"button",class:"ml-12 text-red-800 bg-white rounded",onClick:U},"X")):p("",!0),a.enquiry.structure?(u(),r("a",{key:1,href:a.enquiry.structure_url,target:"_blank"},[e("img",{src:a.enquiry.structure_url,alt:"structure",class:"h-[15rem]"},null,8,ae)],8,de)):p("",!0)])]),e("div",ce,[e("div",null,[n(m,{for:"description",value:"Description"}),f(e("textarea",{type:"text",class:"block w-full mt-1","onUpdate:modelValue":s[5]||(s[5]=t=>l(o).description=t)},null,512),[[z,l(o).description]]),n(c,{class:"mt-2",message:l(o).errors.description},null,8,["message"])]),e("div",me,[pe,e("div",fe,[n(m,{for:"staff",value:"Add Staff"}),e("button",{type:"button",onClick:s[6]||(s[6]=t=>v.value=!0),class:"w-full py-2 text-white bg-blue-400 rounded-lg"}," Add Staff ")]),ye]),e("div",ve,[_e,e("div",ge,[(u(!0),r(h,null,q(a.staffDetails,t=>(u(),r("div",qe,[e("div",he,[e("img",{src:t.profile_photo_url,alt:"",class:"h-[2rem] rounded-full"},null,8,be),e("p",null,y(t.name),1)]),e("button",{type:"button",onClick:C=>O(t)}," X ",8,xe)]))),256))])]),e("div",null,[n(m,{for:"docs",value:"Docs"}),e("input",{type:"file",name:"docs",onInput:s[7]||(s[7]=t=>l(o).docs=t.target.files[0]),accept:".pdf, .jpg, .jpeg, .png, .doc, .docx",id:"docs"},null,32),l(o).docs?(u(),r("button",{key:0,type:"button",class:"text-red-800 bg-white rounded",onClick:D},"X")):p("",!0),n(c,{class:"mt-2",message:l(o).errors.docs},null,8,["message"]),e("div",null,[a.enquiry.docs?(u(),r("button",{key:0,type:"button",class:"ml-12 text-red-800 bg-white rounded",onClick:D},"X")):p("",!0),a.enquiry.docs?(u(),r("a",{key:1,href:`${a.enquiry.docs_url}`,target:"_blank"},[P(a.enquiry.docs)?(u(),r("img",{key:0,src:a.enquiry.docs_url,width:"80",height:"90"},null,8,ke)):X(a.enquiry.docs)?(u(),r("embed",{key:1,src:a.enquiry.docs_url,width:"80",height:"90",type:"application/pdf"},null,8,Ve)):F(a.enquiry.docs)?(u(),r("img",{key:2,src:"/assests/images/docfile.png",width:"80",height:"90",class:"mt-10 ml-5"},null,8,Ce)):p("",!0),e("p",null,y(a.enquiry.docs),1)],8,we)):p("",!0)])])]),e("div",Se,[f(e("input",{type:"checkbox",name:"enquiries",id:"enquiries","onUpdate:modelValue":s[8]||(s[8]=t=>l(o).enquiry=t),checked:""},null,512),[[N,l(o).enquiry]]),je]),n(b,{id:"quote",modelValue:l(o).quote,"onUpdate:modelValue":s[9]||(s[9]=t=>l(o).quote=t),type:"text",class:"block w-full mt-1",value:`${l(o).productName}`},null,8,["modelValue","value"]),n(c,{class:"mt-2",message:l(o).errors.quote},null,8,["message"]),e("div",Ne,[$e,e("div",Ee,[e("button",{type:"button",onClick:s[10]||(s[10]=t=>x.value=!0),class:"w-full py-2 text-white bg-blue-500 rounded-lg"}," Share with ")]),Ue]),e("div",De,[e("div",null,[n(m,{for:"country",value:"Country"}),f(e("select",{class:"w-full border border-gray-200 rounded-lg","onUpdate:modelValue":s[11]||(s[11]=t=>l(o).country=t),required:""},[Re,(u(!0),r(h,null,q(l(E),t=>(u(),r("option",{value:t.id},y(t.name),9,Be))),256))],512),[[S,l(o).country]]),n(c,{class:"mt-2",message:l(o).errors.country},null,8,["message"])]),l(V)?(u(),r("div",Le,[n(m,{for:"state",value:"State"}),f(e("select",{class:"w-full border border-gray-200 rounded-lg","onUpdate:modelValue":s[12]||(s[12]=t=>l(o).state=t)},[Ae,(u(!0),r(h,null,q(l(V),t=>(u(),r("option",{value:t.id},y(t.name),9,Ie))),256))],512),[[S,l(o).state]]),n(c,{class:"mt-2",message:l(o).errors.state},null,8,["message"])])):p("",!0),l(j)?(u(),r("div",Oe,[n(m,{for:"city",value:"City"}),f(e("select",{class:"w-full border border-gray-200 rounded-lg","onUpdate:modelValue":s[13]||(s[13]=t=>l(o).city=t)},[Pe,(u(!0),r(h,null,q(l(j),t=>(u(),r("option",{value:t.id},y(t.name),9,Xe))),256))],512),[[S,l(o).city]]),n(c,{class:"mt-2",message:l(o).errors.city},null,8,["message"])])):p("",!0)]),Fe,e("div",Me,[Ke,n(J,{class:"mt-4 w-full flex justify-center rounded-lg font-bold p-2 mb-[5rem] bg-blue-600"},{default:g(()=>[$(" Submit")]),_:1}),Te])],40,te)])]),n(B,{show:x.value,onClose:s[18]||(s[18]=t=>x.value=!1)},{content:g(()=>[e("div",Qe,[ze,e("div",Ge,[e("div",He,[f(e("select",{"onUpdate:modelValue":s[14]||(s[14]=t=>w.value=t),class:"rounded-lg"},Ye,512),[[S,w.value]]),n(b,{type:"text",class:"flex-1",modelValue:k.value,"onUpdate:modelValue":s[15]||(s[15]=t=>k.value=t),placeholder:`Search ${w.value}`},null,8,["modelValue","placeholder"])])]),(u(!0),r(h,null,q(l(A),t=>(u(),r("div",Ze,[f(e("input",{type:"checkbox",name:"contact",id:"contact",value:t,"onUpdate:modelValue":s[16]||(s[16]=C=>l(o).people=C)},null,8,et),[[N,l(o).people]]),e("label",tt,y(t.name)+" @ "+y(t.company.name),1)]))),256))]),e("div",st,[n(L,{onClick:s[17]||(s[17]=t=>x.value=!x.value),class:"mr-2"},{default:g(()=>[$("OK")]),_:1})])]),_:1},8,["show"]),n(B,{show:v.value,onClose:s[21]||(s[21]=t=>v.value=!v.value)},{content:g(()=>[e("div",ot,[lt,(u(!0),r(h,null,q(a.employees,t=>(u(),r("div",nt,[f(e("input",{type:"checkbox",name:"staff",value:t.id,"onUpdate:modelValue":s[19]||(s[19]=C=>l(o).staff=C)},null,8,ut),[[N,l(o).staff]]),e("label",rt,y(t.name),1)]))),256))]),e("div",it,[n(L,{onClick:s[20]||(s[20]=t=>v.value=!v.value),class:"mr-2"},{default:g(()=>[$("OK")]),_:1})])]),_:1},8,["show"])]),_:1},8,["navigation"]))}};export{xt as default};
