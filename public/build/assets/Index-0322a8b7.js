import{d as r,y as N,c as B,w as p,o as s,a as t,b as c,e as a,i as P,F as j,g as C,h as _,K as h,t as d,f as n}from"./app-ad745f98.js";import{_ as E}from"./AdminLayout-91e7dc08.js";import{t as F}from"./laravel-vue-pagination.es-5db2614b.js";import{f as g}from"./helpers-3a38de6b.js";import{_ as L}from"./DialogModal-ea914144.js";import{_ as $}from"./SecondaryButton-efbe443f.js";import{_ as I}from"./InputLabel-dc2871da.js";import{_ as M}from"./TextInput-e764b81b.js";import"./Banner-2b5a5794.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./UserGroupIcon-957e0a5d.js";import"./MoneyIcon-a70d50ab.js";import"./LogoutIcon-b8d63e69.js";import"./ToastList-cd5f7580.js";import"./Modal-fb88d194.js";const R={class:"p-[1rem]"},T={class:"w-full py-2"},U={class:"bg-white rounded-md shadow overfl"},z={class:"w-full whitespace-nowrap"},J=t("thead",null,[t("tr",{class:"font-bold text-left"},[t("th",{class:"px-6 pt-6 pb-4"},"Date"),t("th",{class:"px-6 pt-6 pb-4"},"ID"),t("th",{class:"px-6 pt-6 pb-4"},"User"),t("th",{class:"px-6 pt-6 pb-4"},"Product Name"),t("th",{class:"px-6 pt-6 pb-4"},"CAS No"),t("th",{class:"px-6 pt-6 pb-4"},"Expiry Date"),t("th",{class:"px-6 pt-6 pb-4"},"Status"),t("th",{class:"px-6 pt-6 pb-4"},"Actions")])],-1),K={class:"hover:bg-gray-100 focus-within:bg-gray-100"},O={class:"border-t"},q={class:"flex items-center px-6 py-4 font-semibold"},G={class:"border-t"},H={class:"flex items-center px-6 py-4 font-semibold"},Q={class:"border-t"},W={class:"flex items-center px-6 py-4 font-semibold",href:"/organizations/asdf/edit"},X={class:"border-t"},Y={class:"flex items-center px-6 py-4 font-semibold"},Z={class:"border-t"},tt={class:"flex items-center px-6 py-4 font-semibold"},et={class:"border-t"},st={key:0,class:"flex items-center px-6 py-4 font-semibold"},ot={class:"border-t"},at={class:"flex items-center px-6 py-4 font-semibold"},lt={key:0,class:"px-2 text-sm text-yellow-600 bg-yellow-200 rounded-xl"},nt={key:1,class:"px-2 text-sm text-green-600 bg-green-200 rounded-xl"},ct={key:2,class:"px-2 text-sm text-yellow-600 bg-yellow-200 rounded-xl"},dt={key:3,class:"px-2 text-sm bg-red-200 text-redd-600 rounded-xl"},it={class:"border-t"},rt={class:"flex gap-2"},pt=["href"],_t=t("p",null,"View",-1),ut=[_t],mt=["onClick"],ft=["onClick"],xt=["onClick"],ht=["onClick"],vt=["onClick"],bt=t("div",{class:"mt-4"},[t("p",{class:"mb-2"},"Are you sure you want to delete?")],-1),yt={class:"flex justify-center mt-2"},It={__name:"Index",props:{confirmsTwoFactorAuthentication:Boolean,sessions:Array,sales:Object},setup(A){const i=r(A.sales),u=(o,l,e)=>{h.post(route("admin.sale.updateStatus",{sale:o,status:l,active:e})).then(f=>{f.status===200&&(console.log(f.data),window.location.reload())})},D=(o=1)=>{h.get(route("admin.sale.index",{page:o})).then(l=>{console.log(l),i.value=l.data})};let m=r(!1),v=r(null),b=r(null);const S=(o,l)=>{m.value=!0,v.value=o,b.value=l},k=()=>{m.value=!1},V=()=>{i.value.splice(b.value,1),h.delete(`sales/${v.value}`).then(o=>{v.value=null,b.value=null,m.value=!1})},y=r();return N(y,async(o,l)=>{o.value!==""?h.get(route("admin.sale.index",{search:o})).then(e=>{i.value=e.data}):window.location.reload()}),(o,l)=>(s(),B(E,{title:"Sales"},{default:p(()=>[t("div",R,[t("div",T,[c(I,{for:"search",value:"Search"}),c(M,{type:"text",class:"w-full",modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=e=>y.value=e)},null,8,["modelValue"])]),t("div",U,[t("table",z,[J,t("tbody",null,[(s(!0),a(j,null,P(i.value.data,(e,f)=>{var w;return s(),a("tr",K,[t("td",O,[t("p",q,d(_(g)(e.created_at.slice(0,10))),1)]),t("td",G,[t("p",H,d("SLE"+e.id),1)]),t("td",Q,[t("p",W,d((w=e.user)==null?void 0:w.name),1)]),t("td",X,[t("p",Y,d(e.product_name),1)]),t("td",Z,[t("p",tt,d(e.cas_no),1)]),t("td",et,[_(g)(e.expiry_date)!="01 Jan 1970"?(s(),a("p",st,d(_(g)(e.expiry_date)),1)):n("",!0)]),t("td",ot,[t("p",at,[e.approved===0?(s(),a("p",lt,"Pending")):n("",!0),e.approved===1&&e.active===1?(s(),a("p",nt,"Approved ")):e.approved===1&&e.active===0?(s(),a("p",ct,"Disapproved ")):n("",!0),e.approved===2?(s(),a("p",dt,"Rejected")):n("",!0)])]),t("td",it,[t("div",rt,[t("a",{href:o.route("sales.show",{sale:e}),target:"_blank",class:"flex items-center gap-1 py-1 text-sm font-bold text-slate-900"},ut,8,pt),e.approved===0||e.approved===2?(s(),a("button",{key:0,onClick:x=>u(e,1,1),class:"flex items-center gap-1 py-1 text-sm font-bold text-slate-900"},"Approve",8,mt)):n("",!0),e.approved===0||e.approved===1?(s(),a("button",{key:1,onClick:x=>u(e,2,0),class:"flex items-center gap-1 py-1 text-sm font-bold text-slate-900"},"Reject",8,ft)):n("",!0),e.approved===1&&e.active===0?(s(),a("button",{key:2,onClick:x=>u(e,1,1),class:"flex items-center gap-1 py-1 text-sm font-bold text-slate-900"},"Activate",8,xt)):n("",!0),e.approved===1&&e.active===1?(s(),a("button",{key:3,onClick:x=>u(e,1,0),class:"flex items-center gap-1 py-1 text-sm font-bold text-slate-900"},"De Active",8,ht)):n("",!0),t("button",{onClick:x=>S(e.id,f),class:"flex items-center gap-1 py-1 text-sm font-bold text-slate-900"},"Delete",8,vt)])])])}),256))])])]),c(L,{show:_(m),onClose:k},{content:p(()=>[bt]),footer:p(()=>[c($,{onClick:V},{default:p(()=>[C(" Delete ")]),_:1}),c($,{onClick:k},{default:p(()=>[C(" Cancel ")]),_:1})]),_:1},8,["show"]),t("div",yt,[c(_(F),{data:i.value,onPaginationChangePage:D},null,8,["data"])])])]),_:1}))}};export{It as default};
