import{u as z,d as g,N as I,c as E,w as u,p as k,o as n,g as d,e as i,a as o,b as l,j as c,v as S,M as H,f as h,h as t,l as j,L as B,E as x,i as C,F as P,n as O,B as T,t as U}from"./app-ad745f98.js";import{_ as Y}from"./ActionMessage-023109ed.js";import{_ as q}from"./FormSection-992bfe61.js";import{_ as p}from"./InputError-5f6dd6ed.js";import{_ as f}from"./InputLabel-dc2871da.js";import{_ as G}from"./PrimaryButton-65f58580.js";import{_ as F}from"./SecondaryButton-efbe443f.js";import{_ as V}from"./TextInput-e764b81b.js";import"./SectionTitle-94f0e8f1.js";import"./_plugin-vue_export-helper-c27b6911.js";const J={key:0,class:"col-span-6 sm:col-span-4"},K={class:"mt-2"},Q=["src","alt"],W={class:"mt-2"},X={class:"col-span-6 sm:col-span-4"},Z={class:"col-span-6 sm:col-span-4"},ee={class:"flex items-center gap-2 mt-1"},te=o("p",null,"Hide Email",-1),se={key:0},le={class:"mt-2 text-sm"},oe={class:"mt-2 text-sm font-medium text-green-600"},ae={class:"col-span-6 sm:col-span-4"},re={class:"flex items-center gap-2 mt-1"},ne=o("p",null,"Hide Number",-1),ie={key:0},ue={class:"mt-2 text-sm"},de={class:"col-span-3 sm:col-span-3"},me=o("option",{value:"",selected:"",disabled:""},"Select Country",-1),ce=["value"],pe={key:1,class:"col-span-3 sm:col-span-3"},fe=o("option",{value:"",selected:"",disabled:""},"Select State",-1),ve=["value"],_e={key:2,class:"col-span-3 sm:col-span-3"},he=o("option",{value:"",selected:"",disabled:""},"Select city",-1),be=["value"],ge={class:"col-span-6 sm:col-span-4"},$e={__name:"UpdateProfileInformationForm",props:{user:Object,countries:Object},setup(v){const m=v,e=z({_method:"PUT",name:m.user.name,email:m.user.email,hide_email:m.user.hide_email===1,number:m.user.number,hide_number:m.user.hide_number===1,country:m.user.country,state:m.user.state,city:m.user.city,address:m.user.address,photo:null}),w=g(null),y=g(null);I(()=>{e.country&&axios.get(route("states",{country:e.country})).then(r=>{w.value=r.data.length>0?r.data:null,e.state=null,e.city=null,y.value=null})}),I(()=>{e.state&&axios.get(route("cities",{state:e.state})).then(r=>{y.value=r.data.length>0?r.data:null})});const N=g(null),b=g(null),_=g(null),L=()=>{_.value&&(e.photo=_.value.files[0]),e.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>$()})},A=()=>{N.value=!0},M=()=>{_.value.click()},D=()=>{const r=_.value.files[0];if(!r)return;const a=new FileReader;a.onload=s=>{b.value=s.target.result},a.readAsDataURL(r)},R=()=>{T.Inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{b.value=null,$()}})},$=()=>{var r;(r=_.value)!=null&&r.value&&(_.value.value=null)};return(r,a)=>(n(),E(q,{onSubmit:k(L,["prevent"])},{title:u(()=>[d(" Profile Information ")]),description:u(()=>[d(" Update your account's profile information and email address. ")]),form:u(()=>[r.$page.props.jetstream.managesProfilePhotos?(n(),i("div",J,[o("input",{ref_key:"photoInput",ref:_,type:"file",class:"hidden",onChange:D},null,544),l(f,{for:"photo",value:"Photo"}),c(o("div",K,[o("img",{src:v.user.profile_photo_url,alt:v.user.name,class:"object-cover w-20 h-20 rounded-full"},null,8,Q)],512),[[S,!b.value]]),c(o("div",W,[o("span",{class:"block w-20 h-20 bg-center bg-no-repeat bg-cover rounded-full",style:H("background-image: url('"+b.value+"');")},null,4)],512),[[S,b.value]]),l(F,{class:"mt-2 mr-2",type:"button",onClick:k(M,["prevent"])},{default:u(()=>[d(" Select A New Photo ")]),_:1},8,["onClick"]),v.user.profile_photo_path?(n(),E(F,{key:0,type:"button",class:"mt-2",onClick:k(R,["prevent"])},{default:u(()=>[d(" Remove Photo ")]),_:1},8,["onClick"])):h("",!0),l(p,{message:t(e).errors.photo,class:"mt-2"},null,8,["message"])])):h("",!0),o("div",X,[l(f,{for:"name",value:"Name"}),l(V,{id:"name",modelValue:t(e).name,"onUpdate:modelValue":a[0]||(a[0]=s=>t(e).name=s),type:"text",class:"block w-full mt-1",autocomplete:"name"},null,8,["modelValue"]),l(p,{message:t(e).errors.name,class:"mt-2"},null,8,["message"])]),o("div",Z,[l(f,{for:"email",value:"Email"}),l(V,{id:"email",modelValue:t(e).email,"onUpdate:modelValue":a[1]||(a[1]=s=>t(e).email=s),type:"email",class:"block w-full mt-1"},null,8,["modelValue"]),l(p,{message:t(e).errors.email,class:"mt-2"},null,8,["message"]),o("div",ee,[c(o("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=s=>t(e).hide_email=s)},null,512),[[j,t(e).hide_email]]),te]),r.$page.props.jetstream.hasEmailVerification&&v.user.email_verified_at===null?(n(),i("div",se,[o("p",le,[d(" Your email address is unverified. "),l(t(B),{href:r.route("verification.send"),method:"post",as:"button",class:"text-gray-600 underline hover:text-gray-900",onClick:k(A,["prevent"])},{default:u(()=>[d(" Click here to re-send the verification email. ")]),_:1},8,["href","onClick"])]),c(o("div",oe," A new verification link has been sent to your email address. ",512),[[S,N.value]])])):h("",!0)]),o("div",ae,[l(f,{for:"number",value:"Number"}),l(V,{id:"number",type:"text",modelValue:t(e).number,"onUpdate:modelValue":a[3]||(a[3]=s=>t(e).number=s),class:"block w-full mt-1",autocomplete:"number"},null,8,["modelValue"]),l(p,{message:t(e).errors.name,class:"mt-2"},null,8,["message"]),o("div",re,[c(o("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=s=>t(e).hide_number=s)},null,512),[[j,t(e).hide_number]]),ne]),v.user.number_verified_at===null?(n(),i("div",ie,[o("p",ue,[d(" Your mobile number is unverified. "),l(t(B),{href:r.route("mobile.verifyform"),class:"text-gray-600 underline hover:text-gray-900"},{default:u(()=>[d(" Click here to re-send the otp. ")]),_:1},8,["href"])])])):h("",!0)]),o("div",de,[l(f,{for:"country",value:"Country"}),c(o("select",{class:"w-full mt-1 border border-gray-200 rounded-lg","onUpdate:modelValue":a[5]||(a[5]=s=>t(e).country=s)},[me,(n(!0),i(P,null,C(v.countries,s=>(n(),i("option",{value:s.id},U(s.name),9,ce))),256))],512),[[x,t(e).country]]),l(p,{message:t(e).errors.country,class:"mt-2"},null,8,["message"])]),w.value?(n(),i("div",pe,[l(f,{for:"state",value:"State"}),c(o("select",{class:"w-full mt-1 border border-gray-200 rounded-lg","onUpdate:modelValue":a[6]||(a[6]=s=>t(e).state=s)},[fe,(n(!0),i(P,null,C(w.value,s=>(n(),i("option",{value:s.id},U(s.name),9,ve))),256))],512),[[x,t(e).state]]),l(p,{message:t(e).errors.state,class:"mt-2"},null,8,["message"])])):h("",!0),y.value?(n(),i("div",_e,[l(f,{for:"city",value:"City"}),c(o("select",{class:"w-full mt-1 border border-gray-200 rounded-lg","onUpdate:modelValue":a[7]||(a[7]=s=>t(e).city=s)},[he,(n(!0),i(P,null,C(y.value,s=>(n(),i("option",{value:s.id},U(s.name),9,be))),256))],512),[[x,t(e).city]]),l(p,{message:t(e).errors.city,class:"mt-2"},null,8,["message"])])):h("",!0),o("div",ge,[l(f,{for:"address",value:"Address"}),l(V,{id:"address",type:"text",modelValue:t(e).address,"onUpdate:modelValue":a[8]||(a[8]=s=>t(e).address=s),class:"block w-full mt-1",autocomplete:"address"},null,8,["modelValue"]),l(p,{message:t(e).errors.address,class:"mt-2"},null,8,["message"])])]),actions:u(()=>[l(Y,{on:t(e).recentlySuccessful,class:"mr-3"},{default:u(()=>[d(" Saved. ")]),_:1},8,["on"]),l(G,{class:O([{"opacity-25":t(e).processing},"bg-blue-600"]),disabled:t(e).processing},{default:u(()=>[d(" Save ")]),_:1},8,["class","disabled"])]),_:1},8,["onSubmit"]))}};export{$e as default};
