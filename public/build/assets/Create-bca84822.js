import{d as c,u as L,N as j,k as O,c as P,w as m,o as u,a as e,p as M,b as a,h as o,j as p,l as $,e as n,f as q,R as F,E as V,i as b,F as x,g as U,t as f}from"./app-ad745f98.js";import{_ as R}from"./DialogModal-1e7001ec.js";import{_ as r}from"./InputError-5f6dd6ed.js";import{_ as i}from"./InputLabel-dc2871da.js";import{_ as v}from"./TextInput-e764b81b.js";import{_ as T}from"./PrimaryButton-804b527b.js";import{_ as B}from"./SecondaryButton-c7eaba10.js";import{_ as Q}from"./FormLayout-ff926ca8.js";import"./Banner-2b5a5794.js";import"./ArrowLeftIcon-d696fddf.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Sidebar-8688ddd2.js";import"./ToastList-cd5f7580.js";const X={class:"max-w-[40rem]"},z=e("div",{class:"justify-between hidden px-2 mt-2 md:flex"},[e("p",{class:"flex justify-center w-full px-2 text-xl font-semibold"}," Add Sale ")],-1),G={class:"px-[2rem] py-[1rem] bg-white"},H=["onSubmit"],J={class:"mb-2"},K={class:"flex"},W=e("span",{class:"text-sm text-red-600"},"*",-1),Y={class:"mb-2"},Z={class:"flex"},ee=e("span",{class:"text-sm text-red-600"},"*",-1),te={class:"grid grid-cols-2 gap-2 mb-2"},se={class:"flex items-center gap-2"},le=e("label",{for:"sales"},"Sales",-1),oe={class:"grid items-center grid-cols-1 gap-4 my-2"},ae={class:"grid grid-cols-3 gap-2"},ue=e("div",null,null,-1),ne={class:"flex flex-col items-center w-full"},de=e("div",null,null,-1),re={class:"grid grid-cols-3"},ie=e("div",null,null,-1),ce={class:"w-full mt-2"},me=e("div",null,null,-1),pe={class:"grid grid-cols-2 gap-2"},fe=e("option",{value:"",selected:"",disabled:""}," Select Country ",-1),ve=["value"],_e={key:0},ye=e("option",{value:"",selected:"",disabled:""}," Select State ",-1),ge=["value"],be={key:1},xe=e("option",{value:"",selected:"",disabled:""}," Select City ",-1),he=["value"],we=e("p",{class:"mt-2 text-red-600"}," Note: The sale will be deactivated after 14 days. ",-1),qe={class:"flex justify-center"},Ve={class:"mt-4"},ke=e("p",{class:"mb-2"},"Add People",-1),Se={class:"p-2 mt-2 bg-white"},Ce={class:"flex gap-2"},Ne=e("option",{value:"user"},"User",-1),$e=e("option",{value:"company"},"Company",-1),Ue=[Ne,$e],je={class:"flex items-center gap-2 mb-2"},Re=["value"],Be={for:"name"},Ae={class:"flex justify-end"},Ee={class:"mt-4"},De=e("p",{class:"mb-2"},"Add Staff",-1),Ie={class:"flex items-center gap-2 mb-2"},Le=["value"],Oe={for:"name"},Pe={class:"flex justify-end"},et={__name:"Create",props:{employees:Object,contacts:Object,countries:Object},setup(k){const S=k,h=c(!1),_=c(!1),y=c("user"),g=c(""),t=L({productName:"",casNo:"",quantityRequired:"",purityRequired:"",structure:null,description:"",staff:c([]),docs:null,sale:!0,quote:"",people:c([]),country:"",state:"",city:""}),C=c(null),w=c(null);j(()=>{t.country&&axios.get(route("states",{country:t.country})).then(d=>{C.value=d.data.length>0?d.data:null,t.state=null,t.city=null,w.value=null})}),j(()=>{t.state&&axios.get(route("cities",{state:t.state})).then(d=>{w.value=d.data.length>0?d.data:null})});const A=O(()=>{if(g.value!==""){if(y.value==="user")return S.contacts.filter(d=>g.value.toLowerCase().split(" ").every(l=>d.name.toLowerCase().includes(l)));if(y.value==="company")return S.contacts.filter(d=>g.value.toLowerCase().split(" ").every(l=>d.company.name.toLowerCase().includes(l)))}else return S.contacts}),E=()=>{t.quote=document.getElementById("quote").value,t.post(route("sale.store"),{onSuccess:d=>{console.log("res"+d.props)}})},D=()=>{t.structure=null,document.getElementById("structure").value=null},I=()=>{t.docs=null,document.getElementById("docs").value=null};return(d,l)=>(u(),P(Q,{title:"Add Sale",navigation:d.route("sales.index")},{default:m(()=>[e("div",X,[z,e("div",G,[e("form",{onSubmit:M(E,["prevent"])},[e("div",J,[e("div",K,[a(i,{for:"product_name",value:"Product Name"}),W]),a(v,{id:"product_name",modelValue:o(t).productName,"onUpdate:modelValue":l[0]||(l[0]=s=>o(t).productName=s),type:"text",class:"block w-full mt-1",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:o(t).errors.productName},null,8,["message"])]),e("div",Y,[e("div",Z,[a(i,{for:"cas_no",value:"CAS No"}),ee]),a(v,{id:"cas_no",modelValue:o(t).casNo,"onUpdate:modelValue":l[1]||(l[1]=s=>o(t).casNo=s),type:"text",class:"block w-full mt-1",required:""},null,8,["modelValue"]),a(r,{class:"mt-2",message:o(t).errors.casNo},null,8,["message"])]),e("div",te,[e("div",null,[a(i,{for:"quantity_required",value:"Quantity in stock"}),a(v,{id:"quantity_required",modelValue:o(t).quantityRequired,"onUpdate:modelValue":l[2]||(l[2]=s=>o(t).quantityRequired=s),type:"text",class:"block w-full mt-1"},null,8,["modelValue"]),a(r,{class:"mt-2",message:o(t).errors.quantityRequired},null,8,["message"])]),e("div",null,[a(i,{for:"purity_required",value:"Purity"}),a(v,{id:"purity_required",modelValue:o(t).purityRequired,"onUpdate:modelValue":l[3]||(l[3]=s=>o(t).purityRequired=s),type:"text",class:"block w-full mt-1"},null,8,["modelValue"]),a(r,{class:"mt-2",message:o(t).errors.purityRequired},null,8,["message"])])]),e("div",se,[p(e("input",{type:"checkbox",name:"sales",id:"sales","onUpdate:modelValue":l[4]||(l[4]=s=>o(t).sale=s),checked:""},null,512),[[$,o(t).sale]]),le]),e("div",null,[a(i,{for:"structure",value:"Structure"}),e("input",{type:"file",name:"structure",onInput:l[5]||(l[5]=s=>o(t).structure=s.target.files[0]),accept:".pdf, .jpg, .jpeg, .png, .doc, .docx",id:"structure"},null,32),o(t).structure?(u(),n("button",{key:0,class:"text-red-800 bg-white rounded",onClick:D},"X")):q("",!0),a(r,{class:"mt-2",message:o(t).errors.purityRequired},null,8,["message"])]),e("div",oe,[e("div",null,[a(i,{for:"description",value:"Description"}),p(e("textarea",{type:"text",class:"block w-full mt-1","onUpdate:modelValue":l[6]||(l[6]=s=>o(t).description=s)},null,512),[[F,o(t).description]]),a(r,{class:"mt-2",message:o(t).errors.description},null,8,["message"])]),e("div",ae,[ue,e("div",ne,[e("button",{type:"button",onClick:l[7]||(l[7]=s=>_.value=!0),class:"w-full py-2 text-white bg-blue-400 rounded-lg"}," Add Staff ")]),de]),e("div",null,[a(i,{for:"docs",value:"Docs"}),e("input",{type:"file",name:"docs",onInput:l[8]||(l[8]=s=>o(t).docs=s.target.files[0]),id:"docs",accept:".pdf, .jpg, .jpeg, .png, .doc, .docx"},null,32),o(t).docs?(u(),n("button",{key:0,class:"text-red-800 bg-white rounded",onClick:I},"X")):q("",!0),a(r,{class:"mt-2",message:o(t).errors.docs},null,8,["message"])])]),a(v,{id:"quote",modelValue:o(t).quote,"onUpdate:modelValue":l[9]||(l[9]=s=>o(t).quote=s),type:"text",class:"block w-full mt-1",value:`Please Quote for ${o(t).productName} with ${o(t).purityRequired} for ${o(t).quantityRequired}`},null,8,["modelValue","value"]),a(r,{class:"mt-2",message:o(t).errors.quote},null,8,["message"]),e("div",re,[ie,e("div",ce,[e("button",{type:"button",onClick:l[10]||(l[10]=s=>h.value=!0),class:"w-full py-2 text-white bg-blue-500 rounded-lg"}," Share with ")]),me]),e("div",pe,[e("div",null,[a(i,{for:"country",value:"Country"}),p(e("select",{class:"w-full border border-gray-200 rounded-lg","onUpdate:modelValue":l[11]||(l[11]=s=>o(t).country=s),required:""},[fe,(u(!0),n(x,null,b(k.countries,s=>(u(),n("option",{value:s.id},f(s.name),9,ve))),256))],512),[[V,o(t).country]]),a(r,{class:"mt-2",message:o(t).errors.country},null,8,["message"])]),C.value?(u(),n("div",_e,[a(i,{for:"state",value:"State"}),p(e("select",{class:"w-full border border-gray-200 rounded-lg","onUpdate:modelValue":l[12]||(l[12]=s=>o(t).state=s)},[ye,(u(!0),n(x,null,b(C.value,s=>(u(),n("option",{value:s.id},f(s.name),9,ge))),256))],512),[[V,o(t).state]]),a(r,{class:"mt-2",message:o(t).errors.state},null,8,["message"])])):q("",!0),w.value?(u(),n("div",be,[a(i,{for:"city",value:"City"}),p(e("select",{class:"w-full border border-gray-200 rounded-lg","onUpdate:modelValue":l[13]||(l[13]=s=>o(t).city=s)},[xe,(u(!0),n(x,null,b(w.value,s=>(u(),n("option",{value:s.id},f(s.name),9,he))),256))],512),[[V,o(t).city]]),a(r,{class:"mt-2",message:o(t).errors.city},null,8,["message"])])):q("",!0)]),we,e("div",qe,[a(T,{class:"mt-4 w-[10rem] flex justify-center rounded-lg font-bold p-2 mb-[5rem] bg-blue-600"},{default:m(()=>[U(" Submit ")]),_:1})])],40,H)])]),a(R,{show:h.value,onClose:l[18]||(l[18]=s=>h.value=!1)},{content:m(()=>[e("div",Ve,[ke,e("div",Se,[e("div",Ce,[p(e("select",{"onUpdate:modelValue":l[14]||(l[14]=s=>y.value=s),class:"rounded-lg"},Ue,512),[[V,y.value]]),a(v,{type:"text",class:"flex-1",modelValue:g.value,"onUpdate:modelValue":l[15]||(l[15]=s=>g.value=s),placeholder:`Search ${y.value}`},null,8,["modelValue","placeholder"])])]),(u(!0),n(x,null,b(o(A),s=>(u(),n("div",je,[p(e("input",{type:"checkbox",name:"contact",id:"contact",value:s,"onUpdate:modelValue":l[16]||(l[16]=N=>o(t).people=N)},null,8,Re),[[$,o(t).people]]),e("label",Be,f(s.name)+" @ "+f(s.company.name),1)]))),256))])]),footer:m(()=>[e("div",Ae,[a(B,{type:"button",onClick:l[17]||(l[17]=s=>h.value=!1)},{default:m(()=>[U("Ok")]),_:1})])]),_:1},8,["show"]),a(R,{show:_.value,onClose:l[21]||(l[21]=s=>_.value=!_.value)},{content:m(()=>[e("div",Ee,[De,(u(!0),n(x,null,b(k.employees,s=>(u(),n("div",Ie,[p(e("input",{type:"checkbox",name:"staff",value:s.id,"onUpdate:modelValue":l[19]||(l[19]=N=>o(t).staff=N)},null,8,Le),[[$,o(t).staff]]),e("label",Oe,f(s.name),1)]))),256))])]),footer:m(()=>[e("div",Pe,[a(B,{type:"button",onClick:l[20]||(l[20]=s=>_.value=!1)},{default:m(()=>[U("Ok")]),_:1})])]),_:1},8,["show"])]),_:1},8,["navigation"]))}};export{et as default};
