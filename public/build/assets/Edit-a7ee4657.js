import{d as f,u as B,N as O,k as T,c as F,w as k,o as u,a as t,p as R,b as n,h as l,e as d,f as p,j as _,E as h,R as X,i as b,F as x,t as v,g as U,K as w,B as H,l as K}from"./app-a99c1f11.js";import{_ as Y}from"./DialogModal-264a62a2.js";import{_ as z}from"./PrimaryButton-47053d9a.js";import{_ as m}from"./InputError-00a923bd.js";import{_ as i}from"./InputLabel-4d3c9eb7.js";import{_ as V}from"./TextInput-aed48f04.js";import{_ as G}from"./FormLayout-08758c22.js";import{_ as J}from"./SecondaryButton-9f95c4b3.js";import"./Banner-af0e7d7b.js";import"./ArrowLeftIcon-f9739669.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Sidebar-08876489.js";import"./ToastList-b09059d6.js";const Q={class:"max-w-[40rem]"},W=t("div",{class:"justify-center hidden w-full p-4 md:flex"},[t("p",{class:"text-xl font-bold"},"Update Product")],-1),Z={class:"px-[2rem] py-[1rem] bg-white"},tt=["onSubmit"],et={class:"mb-2"},st={class:"flex"},ot=t("span",{class:"text-sm text-red-600"},"*",-1),lt={class:"mb-2"},nt={class:"flex"},rt=t("span",{class:"text-sm text-red-600"},"*",-1),ut=["href"],dt=["src"],at={class:"flex gap-4 mt-2"},ct={class:"flex items-center gap-2"},it=t("option",{value:"campaign"}," Campaign ",-1),pt=t("option",{value:"regular"}," Regular ",-1),mt=[it,pt],ft={class:"grid items-center grid-cols-1 gap-4 my-2"},_t=t("option",null,"API",-1),gt=t("option",null,"API INTERMEDIATE",-1),vt=t("option",null,"FINE CHEMICAL",-1),yt=t("option",null,"API IMPURITY",-1),ht=t("option",null,"CRO MOLECULE",-1),bt=t("option",null,"SPECIALITY CHEMICAL",-1),xt=[_t,gt,vt,yt,ht,bt],wt={class:"grid grid-cols-3 gap-2"},Ct=t("div",null,null,-1),kt={class:"flex flex-col items-center w-full"},St=t("div",null,null,-1),Vt={class:"mt-2"},It=t("p",{class:"text-lg"},"Staff Added",-1),Nt={class:"grid grid-cols-1 gap-2 p-2 md:grid-cols-2"},Et={class:"flex justify-between p-2 bg-white border border-gray-200 rounded-lg"},jt={class:"flex items-center gap-2"},Ut=["src"],Lt=["onClick"],$t=["href"],At=["src"],Dt=["src"],Mt=["src"],Pt={class:"grid grid-cols-2 gap-2"},qt=t("option",{disabled:""}," Select Country ",-1),Bt=["value"],Ot={key:0},Tt=t("option",{disabled:""}," Select State ",-1),Ft=["value"],Rt={key:1},Xt=t("option",{selected:"",disabled:""}," Select City ",-1),Ht=["value"],Kt={class:"grid grid-cols-3"},Yt=t("div",null,null,-1),zt=t("div",null,null,-1),Gt={class:"mt-4"},Jt=t("p",{class:"mb-2"},"Add Staff",-1),Qt={class:"flex items-center gap-2 mb-2"},Wt=["value"],Zt={for:"name"},te={class:"flex justify-end"},fe={__name:"Edit",props:{employees:Object,product:Object,staffDetails:Object,countries:Object},setup(c){const a=c;f(!1);const g=f(!1),I=f("user"),S=f(""),e=B({productName:a.product.product_name,casNo:a.product.cas_no,structure:null,description:a.product.description,type:a.product.type,category:a.product.category,staff:f([]),docs:null,sale:a.product.sale_show===1,quote:"",people:f([]),country:a.product.country,state:a.product.state,city:a.product.city}),C=f(null),y=f(null),L=()=>{e.country&&w.get(route("states",{country:e.country})).then(r=>{C.value=r.data.length>0?r.data:null,e.state=null,e.city=null,y.value=null})};O(()=>{e.country&&w.get(route("states",{country:e.country})).then(r=>{C.value=r.data.length>0?r.data:null}),e.state&&w.get(route("cities",{state:e.state})).then(r=>{y.value=r.data.length>0?r.data:null})});const $=()=>{e.state&&w.get(route("cities",{state:e.state})).then(r=>{y.value=r.data.length>0?r.data:null})};T(()=>{if(S.value!==""){if(I.value==="user")return a.contacts.filter(r=>S.value.toLowerCase().split(" ").every(o=>r.name.toLowerCase().includes(o)));if(I.value==="company")return a.contacts.filter(r=>S.value.toLowerCase().split(" ").every(o=>r.company.name.toLowerCase().includes(o)))}else return a.contacts});const A=()=>{e.post(route("product.update",{product:a.product}),{onSuccess:r=>{H.Inertia.get(route("profile.display",{id:a.product.user_id}))}})},D=r=>{w.patch(route("product.update",{type:"remove_staff",product:a.product,staff:r})).then(o=>{window.location.reload()})},N=()=>{e.structure=null,a.product.structure=null,a.product.structure_url=null,document.getElementById("structure").value=null},E=()=>{e.docs=null,a.product.docs=null,a.product.docs_url=null,document.getElementById("docs").value=null},M=r=>{const o=["jpg","jpeg","png","gif"],s=r.split(".").pop().toLowerCase();return o.includes(s)},P=r=>r.split(".").pop().toLowerCase()==="pdf",q=r=>r.split(".").pop().toLowerCase()==="docx";return(r,o)=>(u(),F(G,{title:"Update Sale"},{default:k(()=>[t("div",Q,[W,t("div",Z,[t("form",{onSubmit:R(A,["prevent"])},[t("div",et,[t("div",st,[n(i,{for:"product_name",value:"Product Name"}),ot]),n(V,{id:"product_name",modelValue:l(e).productName,"onUpdate:modelValue":o[0]||(o[0]=s=>l(e).productName=s),type:"text",class:"block w-full mt-1",required:""},null,8,["modelValue"]),n(m,{class:"mt-2",message:l(e).errors.productName},null,8,["message"])]),t("div",lt,[t("div",nt,[n(i,{for:"cas_no",value:"CAS No"}),rt]),n(V,{id:"cas_no",modelValue:l(e).casNo,"onUpdate:modelValue":o[1]||(o[1]=s=>l(e).casNo=s),type:"text",class:"block w-full mt-1",required:""},null,8,["modelValue"]),n(m,{class:"mt-2",message:l(e).errors.casNo},null,8,["message"])]),t("div",null,[n(i,{for:"structure",value:"Structure"}),t("input",{type:"file",name:"structure",onInput:o[2]||(o[2]=s=>l(e).structure=s.target.files[0]),id:"structure",accept:".pdf, .jpg, .jpeg, .png, .doc, .docx"},null,32),l(e).structure?(u(),d("button",{key:0,type:"button",class:"text-red-800 bg-white rounded",onClick:N},"X")):p("",!0),n(m,{class:"mt-2",message:l(e).errors.structure},null,8,["message"]),t("div",null,[c.product.structure?(u(),d("button",{key:0,type:"button",class:"ml-12 text-red-800 bg-white rounded",onClick:N},"X")):p("",!0),c.product.structure?(u(),d("a",{key:1,href:c.product.structure_url,target:"_blank"},[t("img",{src:c.product.structure_url,alt:"structure",class:"h-[15rem]"},null,8,dt)],8,ut)):p("",!0)])]),t("div",at,[t("div",ct,[n(i,{for:"purity_required",value:"Type"}),_(t("select",{"onUpdate:modelValue":o[3]||(o[3]=s=>l(e).type=s)},mt,512),[[h,l(e).type]])])]),t("div",ft,[t("div",null,[n(i,{for:"purity_required",value:"Category"}),_(t("select",{"onUpdate:modelValue":o[4]||(o[4]=s=>l(e).category=s)},xt,512),[[h,l(e).category]])]),t("div",null,[n(i,{for:"category",value:"Category (If not in the list)"}),n(V,{id:"cas_no",type:"text",class:"block w-full mt-1",modelValue:l(e).category,"onUpdate:modelValue":o[5]||(o[5]=s=>l(e).category=s)},null,8,["modelValue"]),n(m,{class:"mt-2",message:l(e).errors.casNo},null,8,["message"])]),t("div",null,[n(i,{for:"description",value:"Description"}),_(t("textarea",{type:"text",class:"block w-full mt-1","onUpdate:modelValue":o[6]||(o[6]=s=>l(e).description=s)},null,512),[[X,l(e).description]]),n(m,{class:"mt-2",message:l(e).errors.description},null,8,["message"])]),t("div",wt,[Ct,t("div",kt,[t("button",{type:"button",onClick:o[7]||(o[7]=s=>g.value=!0),class:"w-full py-2 text-white bg-blue-400 rounded-lg"},"Add Staff")]),St]),t("div",Vt,[It,t("div",Nt,[(u(!0),d(x,null,b(c.staffDetails,s=>(u(),d("div",Et,[t("div",jt,[t("img",{src:s.profile_photo_url,alt:"",class:"h-[2rem] rounded-full"},null,8,Ut),t("p",null,v(s.name),1)]),t("button",{type:"button",onClick:j=>D(s)},"X",8,Lt)]))),256))])]),t("div",null,[n(i,{for:"docs",value:"Docs"}),t("input",{type:"file",name:"docs",onInput:o[8]||(o[8]=s=>l(e).docs=s.target.files[0]),id:"docs",accept:".pdf, .jpg, .jpeg, .png, .doc, .docx"},null,32),l(e).docs?(u(),d("button",{key:0,type:"button",class:"text-red-800 bg-white rounded",onClick:E},"X")):p("",!0),n(m,{class:"mt-2",message:l(e).errors.docs},null,8,["message"]),t("div",null,[c.product.docs?(u(),d("button",{key:0,type:"button",class:"mt-2 ml-12 text-red-800 bg-white rounded",onClick:E},"X")):p("",!0),c.product.docs?(u(),d("a",{key:1,href:`${c.product.docs_url}`,target:"_blank"},[M(c.product.docs)?(u(),d("img",{key:0,src:c.product.docs_url,width:"80",height:"90"},null,8,At)):P(c.product.docs)?(u(),d("embed",{key:1,src:c.product.docs_url,width:"80",height:"90",type:"application/pdf"},null,8,Dt)):q(c.product.docs)?(u(),d("img",{key:2,src:"/assests/images/docfile.png",width:"80",height:"90",class:"mt-10 ml-5"},null,8,Mt)):p("",!0),t("p",null,v(c.product.docs),1)],8,$t)):p("",!0)])])]),t("div",Pt,[t("div",null,[n(i,{for:"country",value:"Country"}),_(t("select",{class:"w-full border border-gray-200 rounded-lg","onUpdate:modelValue":o[9]||(o[9]=s=>l(e).country=s),required:"",onChange:L},[qt,(u(!0),d(x,null,b(c.countries,s=>(u(),d("option",{value:s.id},v(s.name),9,Bt))),256))],544),[[h,l(e).country]]),n(m,{class:"mt-2",message:l(e).errors.country},null,8,["message"])]),C.value?(u(),d("div",Ot,[n(i,{for:"state",value:"State"}),_(t("select",{class:"w-full border border-gray-200 rounded-lg","onUpdate:modelValue":o[10]||(o[10]=s=>l(e).state=s),onChange:$,required:""},[Tt,(u(!0),d(x,null,b(C.value,s=>(u(),d("option",{value:s.id},v(s.name),9,Ft))),256))],544),[[h,l(e).state]]),n(m,{class:"mt-2",message:l(e).errors.state},null,8,["message"])])):p("",!0),y.value?(u(),d("div",Rt,[n(i,{for:"city",value:"City"}),_(t("select",{class:"w-full border border-gray-200 rounded-lg","onUpdate:modelValue":o[11]||(o[11]=s=>l(e).city=s)},[Xt,(u(!0),d(x,null,b(y.value,s=>(u(),d("option",{value:s.id},v(s.name),9,Ht))),256))],512),[[h,l(e).city]]),n(m,{class:"mt-2",message:l(e).errors.city},null,8,["message"])])):p("",!0)]),t("div",Kt,[Yt,n(z,{class:"mt-4 w-full flex justify-center rounded-lg font-bold p-2 mb-[5rem]"},{default:k(()=>[U("Submit ")]),_:1}),zt])],40,tt)])]),n(Y,{show:g.value,onClose:o[14]||(o[14]=s=>g.value=!g.value)},{content:k(()=>[t("div",Gt,[Jt,(u(!0),d(x,null,b(c.employees,s=>(u(),d("div",Qt,[_(t("input",{type:"checkbox",name:"staff",value:s.id,"onUpdate:modelValue":o[12]||(o[12]=j=>l(e).staff=j)},null,8,Wt),[[K,l(e).staff]]),t("label",Zt,v(s.name),1)]))),256))]),t("div",te,[n(J,{onClick:o[13]||(o[13]=s=>g.value=!g.value),class:"mr-2"},{default:k(()=>[U("OK")]),_:1})])]),_:1},8,["show"])]),_:1}))}};export{fe as default};
