import{d as o,y as w,c as k,w as r,o as a,a as t,b as i,h as E,L as B,t as _,e as n,i as f,F as h,p as U,j as C,E as V,f as q,g as S,K as y}from"./app-a99c1f11.js";import{P as A,C as F}from"./PlusIcon-5a7468cb.js";import{_ as M}from"./DialogModal-264a62a2.js";import{_ as D}from"./PrimaryButton-c774a4fc.js";import{_ as O}from"./SecondaryButton-9f95c4b3.js";import{_ as P}from"./AppLayout-f8922642.js";import{_ as I}from"./InfiniateScroll-90a21e0f.js";import{_ as T}from"./TextInput-a7862116.js";import"./BuildingIcon-6438f979.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./MapPinIcon-609e4c0a.js";import"./UserIcon-5b9f3114.js";import"./DialogModal-c682f939.js";import"./Modal-6b8225ed.js";import"./helpers-3a38de6b.js";/* empty css                                                                            */import"./Banner-af0e7d7b.js";import"./BottomTab-9f3a44df.js";import"./Sidebar-08876489.js";import"./ToastList-b09059d6.js";const K={class:"max-w-[40rem]"},Q={class:"flex justify-between px-2 my-3"},z=t("p",{class:"px-2 text-xl font-semibold"},"Enquiries",-1),G={class:"flex items-center p-1 px-4 py-2 text-white bg-blue-600 rounded-lg"},H=t("p",{class:"text-sm"},"Add Enquiry",-1),J={class:"px-2"},R={class:"flex justify-end w-full px-2 py-1"},W={class:"mt-2 mr-3 text-blue-400"},X={class:"mt-4"},Y=t("p",{class:"mb-2"},"Change Location",-1),Z=["onSubmit"],ee={class:"flex items-center gap-2 mb-2"},te=t("option",{value:"",selected:"",disabled:""}," Select Country ",-1),le=["value"],se={key:0,class:"flex items-center gap-2 mb-2"},ae=t("option",{value:"",selected:"",disabled:""}," Select State ",-1),oe=["value"],ne={key:1,class:"flex items-center gap-2 mb-2"},ie=t("option",{value:"",selected:"",disabled:""}," Select City ",-1),ue=["value"],Le={__name:"Index",props:{confirmsTwoFactorAuthentication:Boolean,sessions:Array,enquiries:Object,countries:Object,filterCountry:Object},setup(c){const $=c,m=o(!1),x=o(""),u=o($.enquiries),b=o(null),p=o(null),v=o(null),d=o(null),g=o(null);o(null),w(v,async(s,l)=>{y.get(route("states",{country:s})).then(e=>{b.value=e.data.length>0?e.data:null,p.value=null,d.value=null})}),w(d,async(s,l)=>{y.get(route("cities",{state:s})).then(e=>{p.value=e.data.length>0?e.data:null})});const L=()=>{window.location="/enquiry?country="+v.value+"&state="+d.value+"&city="+g.value},N=()=>{window.location="/enquiry"},j=()=>{if(u.value.next_page_url)return y.get(u.value.next_page_url).then(s=>{u.value={...s.data,data:[...u.value.data,...s.data.data]}})};return w(x,async(s,l)=>{console.log(s),s.value!==""?y.get(route("enquiry.index",{search:s})).then(e=>{u.value=e.data}):window.location.reload()}),(s,l)=>(a(),k(P,{title:"Enquiry"},{default:r(()=>[t("div",K,[t("div",Q,[z,i(E(B),{href:s.route("enquiry.create")},{default:r(()=>[t("div",G,[i(A,{class:"h-[1.3rem]"}),H])]),_:1},8,["href"])]),t("div",J,[i(T,{type:"text",modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=e=>x.value=e),class:"mt-1 block w-full h-[2.5rem] p-1",placeholder:"Search Product Name/CAS No"},null,8,["modelValue"])]),t("div",R,[t("span",W,_(c.filterCountry?c.filterCountry.name.toUpperCase():""),1),t("button",{onClick:l[1]||(l[1]=e=>m.value=!0),class:"p-1 px-4 py-1 text-sm text-white bg-blue-600 rounded-lg"}," Filter Location ")]),i(I,{onLoadMore:j,class:"space-y-4"},{default:r(()=>[(a(!0),n(h,null,f(u.value.data,e=>(a(),k(F,{details:e,id:"ENQ"+e.id,link:s.route("sale.chats.redirect",{enquiry:e.id})},null,8,["details","id","link"]))),256))]),_:1})]),i(M,{show:m.value,onClose:l[6]||(l[6]=e=>m.value=!m.value)},{content:r(()=>[t("div",X,[Y,t("form",{onSubmit:U(L,["prevent"])},[t("div",ee,[C(t("select",{name:"country",id:"country",class:"w-full rounded-lg","onUpdate:modelValue":l[2]||(l[2]=e=>v.value=e),required:""},[te,(a(!0),n(h,null,f(c.countries,e=>(a(),n("option",{value:e.id},_(e.name),9,le))),256))],512),[[V,v.value]])]),b.value?(a(),n("div",se,[C(t("select",{name:"state",id:"state",class:"w-full rounded-lg","onUpdate:modelValue":l[3]||(l[3]=e=>d.value=e)},[ae,(a(!0),n(h,null,f(b.value,e=>(a(),n("option",{value:e.id},_(e.name),9,oe))),256))],512),[[V,d.value]])])):q("",!0),p.value?(a(),n("div",ne,[C(t("select",{name:"city",id:"city",class:"w-full rounded-lg","onUpdate:modelValue":l[4]||(l[4]=e=>g.value=e)},[ie,(a(!0),n(h,null,f(p.value,e=>(a(),n("option",{value:e.id},_(e.name),9,ue))),256))],512),[[V,g.value]])])):q("",!0),i(O,{onClick:l[5]||(l[5]=e=>N())},{default:r(()=>[S(" Cancel ")]),_:1}),i(D,{class:"ml-4"},{default:r(()=>[S(" Submit ")]),_:1})],40,Z)])]),_:1},8,["show"])]),_:1}))}};export{Le as default};
