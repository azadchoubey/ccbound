import{x as j,d as f,u as C,s as $,c as h,w as v,o as l,a as e,e as c,i as B,F as I,b as r,h as y,L as E,f as U,j as D,R as L,S as F,K as b}from"./app-ad745f98.js";import{_ as O,a as q}from"./SentMessageCard-652022f6.js";import{U as N,C as P,P as T}from"./UploadIcon-abb0c5da.js";import{E as V}from"./EllipsisHorizontal-36b10a69.js";import{U as A}from"./UserIcon-f7658644.js";import{_ as K}from"./ChatRoomLayout-1e97b12e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ArrowLeftIcon-d696fddf.js";import"./Sidebar-8688ddd2.js";import"./ToastList-cd5f7580.js";const S={class:"max-w-[40rem] m-auto pb-5"},H={id:"container",class:"px-2 flex-1 mb-[5rem] w-full bg-white h-[calc(100vh_-_150px)] overflow-y-auto"},z={class:"w-full p-1"},R={class:""},Y={class:"w-full fixed bottom-0 max-w-[40rem]"},G={key:0,class:"flex flex-col p-1 mx-2 mb-2 bg-white border border-gray-200 rounded-lg"},J={class:"flex justify-end"},Q=e("svg",{class:"w-6 h-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),W=[Q],X={class:"flex justify-between px-[5rem]"},Z={class:"flex flex-col items-center"},ee=e("p",{class:"text-sm"},"Share My Details",-1),oe={class:"flex flex-col items-center"},te={class:"inline-block p-2 bg-green-600 rounded-full",onclick:"document.getElementById('file').click()"},se=e("p",null,"Upload",-1),le={class:"flex flex-col items-center"},ae=e("p",null,"More",-1),ne={class:"p-2 px-3 bg-white"},re={key:0,class:"flex"},ie={class:"flex items-center flex-1 px-3 py-1 bg-gray-200 rounded-3xl"},ce={class:"flex items-center"},ue={key:1},de=e("p",{class:"flex justify-center"},"You are no longer member of the group",-1),me=[de],ke={__name:"Show",props:{confirmsTwoFactorAuthentication:Boolean,sessions:Array,chatroom:Object,messages:Object,auth_member:Object,readBy:Object},setup(d){const i=d,_=j(),a=f(!1),n=f(null),m=C({file:[]}),u=f(i.messages);$(()=>{g(0)});const x=s=>{u.value=u.value.filter(t=>t.id!==s)},g=s=>{var t=document.getElementById("container");t.scrollTop=t.scrollHeight+s},w=async()=>{await b.get(route("enquiry.chatroom.show",{chatroom:i.chatroom})).then(s=>{u.value=s.data}),g(20)},p=()=>{n.value!==null&&n.value!==""&&b.post(route("chatroom.newMessage",{id:i.chatroom.id}),{message:n.value}).then(s=>{console.log(s),s.status===201&&(n.value="",w())}).catch(s=>{console.log(s)})},k=()=>{a.value=!1,m.post(route("chatroom.fileUpload",{id:i.chatroom.id})),m.file=[]},M=()=>{n.value="Email: "+_.props.value.user.email+" Number: "+_.props.value.user.number,p(),a.value=!1};return(s,t)=>(l(),h(K,{title:"Chatroom",showInfo:!0,infoLink:s.route("enquiry.chatroom.settings",{chatroom:s.$props.chatroom}),name:`My Enquiry - ${i.chatroom.name}`},{default:v(()=>[e("div",S,[e("div",H,[e("div",z,[(l(!0),c(I,null,B(u.value,o=>(l(),c("div",R,[o.user.id===s.$page.props.user.id?(l(),h(O,{key:0,message:o,name:o.user.name,company:o.user.company.name,profile_image:o.user.profile_photo_url,time:o.created_at,onMessageDeleted:x},null,8,["message","name","company","profile_image","time"])):(l(),h(q,{key:1,message:o,name:o.user.name,company:o.user.company.name,profile_image:o.user.profile_photo_url,time:o.created_at},null,8,["message","name","company","profile_image","time"]))]))),256))])]),e("div",Y,[a.value?(l(),c("div",G,[e("div",J,[e("button",{class:"inline-flex items-center justify-center p-1 text-gray-400 transition bg-gray-200 rounded-md hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500",onClick:t[0]||(t[0]=o=>a.value=!a.value)},W)]),e("div",X,[e("div",Z,[e("button",{onClick:M,class:"inline-block p-2 bg-blue-600 rounded-full"},[r(A,{class:"text-white"})]),ee]),e("div",oe,[e("button",te,[r(N,{class:"text-white"})]),se]),e("div",le,[r(y(E),{href:s.route("enquiry.chatroom.settings",{chatroom:d.chatroom}),class:"block p-2 bg-white border border-gray-200 rounded-full"},{default:v(()=>[r(V,{class:"text-red-600"})]),_:1},8,["href"]),ae])])])):U("",!0),e("div",ne,[d.auth_member.pivot.chat_left==0?(l(),c("div",re,[e("div",ie,[e("button",{onClick:t[1]||(t[1]=o=>a.value=!a.value)},[r(P)]),e("input",{type:"file",class:"hidden",id:"file",multiple:"",onInput:t[2]||(t[2]=o=>y(m).file=o.target.files),onChange:t[3]||(t[3]=o=>k())},null,32),D(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>n.value=o),onKeyup:t[5]||(t[5]=F(o=>p(),["enter"])),placeholder:"Type a message",class:"w-full bg-gray-200 border-0 focus:outline-none focus:ring-0"},null,544),[[L,n.value]])]),e("div",ce,[e("button",{onClick:t[6]||(t[6]=o=>p()),class:"px-3 py-2 text-white bg-blue-700 rounded-2xl"},[r(T)])])])):(l(),c("div",ue,me))])])])]),_:1},8,["infoLink","name"]))}};export{ke as default};
