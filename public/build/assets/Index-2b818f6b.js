import{u as Q,d as n,y as U,c as F,w as v,o as l,a as t,e as o,f as c,b as m,h as p,L as Y,n as G,t as b,p as j,j as _,R as H,g,l as N,i as C,F as S,E as L,K as V}from"./app-ad745f98.js";import{P as J,C as W}from"./PlusIcon-663b2982.js";import{_ as X}from"./DialogModal-1e7001ec.js";import{_ as A}from"./PrimaryButton-65f58580.js";import{_ as Z}from"./SecondaryButton-efbe443f.js";import{_ as ee}from"./AppLayout-d8d9702b.js";import{_ as te}from"./InfiniateScroll-ad0659fc.js";import{_ as se}from"./TextInput-b0ea2240.js";import"./BuildingIcon-56240bf1.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./MapPinIcon-fb198b97.js";import"./UserIcon-f7658644.js";import"./DialogModal-ea914144.js";import"./Modal-fb88d194.js";import"./helpers-3a38de6b.js";/* empty css                                                                            */import"./Banner-2b5a5794.js";import"./BottomTab-9c18cf54.js";import"./Sidebar-8688ddd2.js";import"./ToastList-cd5f7580.js";const le={class:"max-w-[40rem]"},oe={class:"flex justify-between px-2 my-3"},ae={key:0,class:"px-2 text-xl font-semibold"},ne=t("b",null,"Products",-1),ue=[ne],re={class:"flex items-center p-1 px-4 py-2 text-white bg-blue-600 rounded-lg"},ie=t("p",{class:"text-sm"},"Add Product",-1),de={class:"px-2"},ce={key:0,class:"mb-5 text-5xl text-center mt-72"},me=t("b",null,[g("Search "),t("span",{class:"text-blue-400"},"Products")],-1),pe=[me],ve={class:"mt-5 ml-3 mr-3 text-blue-400"},fe={key:0,class:"my-5"},_e=t("p",{class:"text-xl font-bold"},"Share message",-1),he=["onSubmit"],be={class:"flex justify-end w-full"},ge={key:2},xe=t("b",null,"Results For",-1),ye={class:"flex w-full gap-2"},we=["value"],ke={class:"mt-4"},Ce=t("p",{class:"mb-2"},"Change Location",-1),Se=["onSubmit"],Ve={class:"flex items-center gap-2 mb-2"},Pe=t("option",{value:"",selected:"",disabled:""}," Select Country ",-1),Me=["value"],$e={key:0,class:"flex items-center gap-2 mb-2"},Le=t("option",{value:"",selected:"",disabled:""}," Select State ",-1),Ue=["value"],Fe={key:1,class:"flex items-center gap-2 mb-2"},je=t("option",{value:"",selected:"",disabled:""}," Select City ",-1),Ne=["value"],st={__name:"Index",props:{confirmsTwoFactorAuthentication:Boolean,sessions:Array,products:Object,countries:Object,filterCountry:Object},setup(x){const B=x,u=Q({message:null,sales:n([]),products:n([])}),y=n(!1),f=n(""),r=n(!1),i=n(B.products),P=n(null),w=n(null),k=n(null),h=n(null),M=n(null),D=window.location.search,R=new URLSearchParams(D).get("country");let d=!1;R&&(i.value.data.length>0?(r.value=!0,d=!0):(r.value=!1,d=!1,u.products=[])),U(k,async(a,s)=>{V.get(route("states",{country:a})).then(e=>{P.value=e.data.length>0?e.data:null,w.value=null,h.value=null})}),U(h,async(a,s)=>{V.get(route("cities",{state:a})).then(e=>{w.value=e.data.length>0?e.data:null})});const q=()=>{window.location="/products?country="+k.value+"&state="+h.value+"&city="+M.value},E=()=>{window.location="/products"},O=()=>{if(i.value.next_page_url)return V.get(i.value.next_page_url).then(a=>{i.value={...a.data,data:[...i.value.data,...a.data.data]}})},T=()=>{if(u.products.length>5){alert("You cannot select more than 5");return}u.post(route("chatroom.sendMessages"),{onFinish:()=>confirm("Message Sent")})},I=()=>{f.value!==""?V.get(route("product.index",{search:f.value})).then(a=>{i.value=a.data,i.value.data.length>0?(r.value=!0,d=!0):(r.value=!1,d=!1,u.products=[])}):window.location.reload(),f.value!=""?d=!0:(d=!1,u.products=[])},$=n(null),z=a=>{a.target.checked?i.value.data.forEach(s=>{u.products.push(s.id)}):(u.products=[],$.value=null)};return(a,s)=>(l(),F(ee,{title:"Products"},{default:v(()=>[t("div",le,[t("div",oe,[r.value?(l(),o("p",ae,ue)):c("",!0),m(p(Y),{href:a.route("product.create")},{default:v(()=>[t("div",re,[m(J,{class:"h-[1.3rem]"}),ie])]),_:1},8,["href"])]),t("div",de,[t("div",null,[r.value?c("",!0):(l(),o("p",ce,pe)),m(se,{type:"text",modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=e=>f.value=e),class:"block w-full h-12 p-1 rounded-lg",placeholder:"Search Product Name/CAS No"},null,8,["modelValue"]),t("div",{class:G(`${r.value?"":"text-center"}`)},[t("button",{type:"button",class:"p-1 px-4 py-1 mt-10 text-white bg-blue-600 rounded-lg",onClick:I},"Submit"),t("span",ve,b(x.filterCountry?x.filterCountry.name.toUpperCase():""),1),t("button",{onClick:s[1]||(s[1]=e=>y.value=!0),class:"p-1 px-4 py-1 mt-2 text-white bg-blue-600 rounded-lg"}," Filter Location ")],2)])]),p(d)?(l(),o("div",fe,[_e,t("form",{onSubmit:j(T,["prevent"])},[_(t("textarea",{class:"w-full rounded-lg focus:outline-none","onUpdate:modelValue":s[2]||(s[2]=e=>p(u).message=e),required:""},null,512),[[H,p(u).message]]),t("div",be,[m(A,{class:"px-4 py-2 text-sm text-white bg-blue-600 border-blue-600 rounded-lg ml"},{default:v(()=>[g(" Share ")]),_:1})])],40,he)])):c("",!0),p(d)?_((l(),o("input",{key:1,type:"checkbox",class:"block mb-5",value:"0","onUpdate:modelValue":s[3]||(s[3]=e=>$.value=e),onChange:z},null,544)),[[N,$.value]]):c("",!0),r.value?(l(),o("span",ge,[xe,g(": "+b(f.value),1)])):c("",!0),r.value?(l(),F(te,{key:3,onLoadMore:O,class:"mt-4 space-y-4"},{default:v(()=>[(l(!0),o(S,null,C(i.value.data,e=>(l(),o("div",ye,[p(d)?_((l(),o("input",{key:0,type:"checkbox",class:"block",value:e.id,"onUpdate:modelValue":s[4]||(s[4]=K=>p(u).products=K)},null,8,we)),[[N,p(u).products]]):c("",!0),m(W,{details:e,id:"PRD"+e.id,link:a.route("product.chats.redirect",{product:e.id})},null,8,["details","id","link"])]))),256))]),_:1})):c("",!0)]),m(X,{show:y.value,onClose:s[9]||(s[9]=e=>y.value=!y.value)},{content:v(()=>[t("div",ke,[Ce,t("form",{onSubmit:j(q,["prevent"])},[t("div",Ve,[_(t("select",{name:"country",id:"country",class:"w-full rounded-lg","onUpdate:modelValue":s[5]||(s[5]=e=>k.value=e),required:""},[Pe,(l(!0),o(S,null,C(x.countries,e=>(l(),o("option",{value:e.id},b(e.name),9,Me))),256))],512),[[L,k.value]])]),P.value?(l(),o("div",$e,[_(t("select",{name:"state",id:"state",class:"w-full rounded-lg","onUpdate:modelValue":s[6]||(s[6]=e=>h.value=e)},[Le,(l(!0),o(S,null,C(P.value,e=>(l(),o("option",{value:e.id},b(e.name),9,Ue))),256))],512),[[L,h.value]])])):c("",!0),w.value?(l(),o("div",Fe,[_(t("select",{name:"city",id:"city",class:"w-full rounded-lg","onUpdate:modelValue":s[7]||(s[7]=e=>M.value=e)},[je,(l(!0),o(S,null,C(w.value,e=>(l(),o("option",{value:e.id},b(e.name),9,Ne))),256))],512),[[L,M.value]])])):c("",!0),m(Z,{onClick:s[8]||(s[8]=e=>E())},{default:v(()=>[g(" Cancel ")]),_:1}),m(A,{class:"ml-4"},{default:v(()=>[g(" Submit ")]),_:1})],40,Se)])]),_:1},8,["show"])]),_:1}))}};export{st as default};
