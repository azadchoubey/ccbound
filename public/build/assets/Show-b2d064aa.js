import{x as I,d as p,u as U,s as D,c as f,w,o as a,a as o,e as u,i as E,F as L,b as r,h as k,L as F,f as M,j as O,R as S,S as N,K as C}from"./app-ad745f98.js";import{_ as P,a as T}from"./SentMessageCard-652022f6.js";import{U as V,C as q,P as A}from"./UploadIcon-abb0c5da.js";import{E as K}from"./EllipsisHorizontal-36b10a69.js";import{U as H}from"./UserIcon-f7658644.js";import{_ as z}from"./ChatRoomLayout-1e97b12e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ArrowLeftIcon-d696fddf.js";import"./Sidebar-8688ddd2.js";import"./ToastList-cd5f7580.js";const R={class:"max-w-[40rem] m-auto pb-5"},G={id:"container",class:"px-2 flex-1 mb-[5rem] w-full bg-white h-[calc(100vh_-_150px)] overflow-y-auto"},J={class:"w-full p-1"},Q={class:""},W={class:"w-full fixed bottom-0 max-w-[40rem]"},X={key:0,class:"flex flex-col p-1 mx-2 mb-2 bg-white border border-gray-200 rounded-lg"},Y={class:"flex justify-end"},Z=o("svg",{class:"w-6 h-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),ee=[Z],oe={class:"flex justify-between px-[5rem]"},te={class:"flex flex-col items-center"},se=o("p",{class:"text-sm"},"Share My Deatils",-1),le={class:"flex flex-col items-center"},ne={class:"inline-block p-2 bg-green-600 rounded-full",onclick:"document.getElementById('file').click()"},ae=o("p",null,"Upload",-1),re={class:"flex flex-col items-center"},ie=o("p",null,"More",-1),ce={class:"p-2 px-3 bg-white"},ue={key:0,class:"flex"},de={class:"flex items-center flex-1 px-3 py-1 bg-gray-200 rounded-3xl"},me={class:"flex items-center"},ke={__name:"Show",props:{confirmsTwoFactorAuthentication:Boolean,sessions:Array,chatroom:Object,messages:Object,auth_member:Object,readBy:Object},setup(d){const i=d,h=I(),l=p(!1),n=p(null),v=U({file:null}),c=p(i.messages);D(()=>{_(0)});const $=s=>{c.value=c.value.filter(t=>t.id!==s)},_=s=>{var t=document.getElementById("container");t.scrollTop=t.scrollHeight+s},b=async()=>{await C.get(route("enquiry.chatroom.show",{chatroom:i.chatroom})).then(s=>{c.value=s.data}),_(20)},m=()=>{n.value!==null&&n.value!==""&&C.post(route("chatroom.newMessage",{id:i.chatroom.id}),{message:n.value}).then(s=>{console.log(s),s.status===201&&(n.value="",b())}).catch(s=>{console.log(s)})},j=()=>{l.value=!1,v.post(route("chatroom.fileUpload",{id:i.chatroom.id}),{onSuccess:()=>b()})},B=()=>{n.value="Email: "+h.props.value.user.email+" Number: "+h.props.value.user.number,m(),l.value=!1};return console.log(c),(s,t)=>(a(),f(z,{title:"Chatroom",showInfo:!0,navigationBack:"/chats/enquiry/asdf",infoLink:s.route("sale.chatroom.settings",{chatroom:s.$props.chatroom}),name:`My Sale - ${i.chatroom.name}`},{default:w(()=>[o("div",R,[o("div",G,[o("div",J,[(a(!0),u(L,null,E(c.value,e=>{var y,x,g;return a(),u("div",Q,[e.user&&e.user.id===s.$page.props.user.id?(a(),f(P,{key:0,message:e,name:e.user.name,company:e.user.company.name,profile_image:e.user.profile_photo_url,time:e.created_at,onMessageDeleted:$},null,8,["message","name","company","profile_image","time"])):(a(),f(T,{key:1,message:e,name:(y=e==null?void 0:e.user)==null?void 0:y.name,company:(x=e==null?void 0:e.user)==null?void 0:x.company.name,profile_image:(g=e==null?void 0:e.user)==null?void 0:g.profile_photo_url,time:e.created_at},null,8,["message","name","company","profile_image","time"]))])}),256))])]),o("div",W,[l.value?(a(),u("div",X,[o("div",Y,[o("button",{class:"inline-flex items-center justify-center p-1 text-gray-400 transition bg-gray-200 rounded-md hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500",onClick:t[0]||(t[0]=e=>l.value=!l.value)},ee)]),o("div",oe,[o("div",te,[o("button",{onClick:B,class:"inline-block p-2 bg-blue-600 rounded-full"},[r(H,{class:"text-white"})]),se]),o("div",le,[o("button",ne,[r(V,{class:"text-white"})]),ae]),o("div",re,[r(k(F),{href:s.route("enquiry.chatroom.settings",{chatroom:d.chatroom}),class:"block p-2 bg-white border border-gray-200 rounded-full"},{default:w(()=>[r(K,{class:"text-red-600"})]),_:1},8,["href"]),ie])])])):M("",!0),o("div",ce,[d.auth_member.pivot.chat_left==0?(a(),u("div",ue,[o("div",de,[o("button",{onClick:t[1]||(t[1]=e=>l.value=!l.value)},[r(q)]),o("input",{type:"file",class:"hidden",id:"file",onInput:t[2]||(t[2]=e=>k(v).file=e.target.files[0]),onChange:t[3]||(t[3]=e=>j())},null,32),O(o("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.value=e),onKeyup:t[5]||(t[5]=N(e=>m(),["enter"])),placeholder:"Type a message",class:"w-full bg-gray-200 border-0 focus:outline-none focus:ring-0"},null,544),[[S,n.value]])]),o("div",me,[o("button",{onClick:t[6]||(t[6]=e=>m()),class:"px-3 py-2 text-white bg-blue-700 rounded-2xl"},[r(A)])])])):M("",!0)])])])]),_:1},8,["infoLink","name"]))}};export{ke as default};
